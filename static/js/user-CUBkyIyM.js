import{n as F,o as O,u as R,q as $,r as q,v as A,w as H,a as M,s as P}from"./element-plus-BTycu_U5.js";import{g as W}from"./shared/role/user-8JVHZRdF.js";import{a as Y}from"./common-CFxLB9Tb.js";import{d as G,r as y,P as L,o as J,j as K,a as d,c as v,e as a,w as t,f as r,H as Q,V as b,T as g,aj as E,g as u,b as X,Y as U,_ as Z}from"./vendor-CpPSV6_x.js";import"./axios-BGtzecez.js";const ee=async w=>Y({},"/getUserList",w),le={class:"container"},oe={class:"dialog-footer"},ae=G({__name:"index",setup(w){const i=y([]),n=L({nickName:"",role:0}),_=y([]),m=y(!1);let s=L({id:0,nickName:"",role:[],userName:""});const h=o=>{Object.assign(s,{...o,role:o.role.map(e=>e.role)}),m.value=!0},B=()=>{m.value=!1;let o=i.value.find(e=>e.id===s.id);o.nickName=s.nickName,o.role=[],_.value.forEach(e=>{s.role.find(p=>p===e.roleId)&&o.role.push({role:e.roleId,roleName:e.roleName})})},D=o=>{console.log(o)},j=()=>{ee().then(o=>{i.value=o}).catch(()=>{})},z=()=>{W().then(o=>{_.value=o}).catch(()=>{})};J(()=>{j(),z()});const C=()=>{let o=[];n.nickName||n.role?(n.nickName&&(o=i.value.filter(e=>e.nickName.indexOf(n.nickName)!==-1)),n.role&&(o=n.nickName?o:i.value,o=o.filter(e=>e.role.find(p=>p.role===n.role)))):o=i.value,i.value=o};return K([()=>n.nickName,()=>n.role],(o,e)=>{(n.nickName===""||n.role===0)&&C()}),(o,e)=>{const p=$,c=q,V=A,I=H,f=M,x=F,k=P,S=O,T=R;return d(),v("div",le,[a(x,{inline:"",model:r(n),class:"search-form"},{default:t(()=>[a(c,{label:"姓名",prop:"nickName"},{default:t(()=>[a(p,{modelValue:r(n).nickName,"onUpdate:modelValue":e[0]||(e[0]=l=>r(n).nickName=l),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),a(c,{label:"角色",prop:"role"},{default:t(()=>[a(I,{modelValue:r(n).role,"onUpdate:modelValue":e[1]||(e[1]=l=>r(n).role=l),placeholder:"请选择角色",multiple:"",class:"w192"},{default:t(()=>[(d(),b(V,{key:0,label:"全部",value:0})),(d(!0),v(g,null,E(r(_),l=>(d(),b(V,{key:l.roleId,label:l.roleName,value:l.roleId},{default:t(()=>[u(U(l.roleName),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(c,null,{default:t(()=>[a(f,{type:"primary",onClick:C},{default:t(()=>e[6]||(e[6]=[u("查询")])),_:1})]),_:1})]),_:1},8,["model"]),a(S,{data:r(i),border:"",style:{width:"100%"}},{default:t(()=>[a(k,{prop:"id",label:"ID",width:"180"}),a(k,{prop:"nickName",label:"姓名"}),a(k,{prop:"role",label:"角色"},{default:t(l=>[(d(!0),v(g,null,E(l.row.role,N=>(d(),b(f,{key:N.role,link:"",type:"primary",size:"small"},{default:t(()=>[u(U(N.roleName),1)]),_:2},1024))),128))]),_:1}),a(k,{label:"操作"},{default:t(l=>[a(f,{type:"primary",size:"small",link:"",onClick:N=>h(l.row)},{default:t(()=>e[7]||(e[7]=[u("编辑")])),_:2},1032,["onClick"]),a(f,{type:"danger",size:"small",link:"",onClick:N=>D(l.row)},{default:t(()=>e[8]||(e[8]=[u("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),a(T,{modelValue:r(m),"onUpdate:modelValue":e[5]||(e[5]=l=>Q(m)?m.value=l:null),title:"编辑用户信息"},{footer:t(()=>[X("span",oe,[a(f,{onClick:e[4]||(e[4]=l=>m.value=!1)},{default:t(()=>e[9]||(e[9]=[u("取消")])),_:1}),a(f,{type:"primary",onClick:B},{default:t(()=>e[10]||(e[10]=[u("确定")])),_:1})])]),default:t(()=>[a(x,{model:r(s),size:"large"},{default:t(()=>[a(c,{label:"用户昵称"},{default:t(()=>[a(p,{modelValue:r(s).nickName,"onUpdate:modelValue":e[2]||(e[2]=l=>r(s).nickName=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(c,{label:"用户角色"},{default:t(()=>[a(I,{modelValue:r(s).role,"onUpdate:modelValue":e[3]||(e[3]=l=>r(s).role=l),placeholder:"请选择角色",multiple:""},{default:t(()=>[(d(!0),v(g,null,E(r(_),l=>(d(),b(V,{key:l.roleId,label:l.roleName,value:l.roleId},{default:t(()=>[u(U(l.roleName),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),ue=Z(ae,[["__scopeId","data-v-e9ab6625"]]);export{ue as default};
